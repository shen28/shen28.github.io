<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <title> 淘淘商城的实践(2)——后台系统搭建 · zgshen </title>
    <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="browsermode" content="application">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="zgshen">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="msapplication-navbutton-color" content="#666666">
<meta name= "format-detection" content="telephone=no" />
<meta name="keywords" content="nlvi, Nlvi" />


    <meta name="subtitle" content="欢迎…">


    <meta name="description" content="啊深的博客。记录一些日常琐事和技术心得等等。">


    <meta name="keywords" content="JavaSE,Spring,其他" />


    <meta name="keywords" content="商城技术应用, Nlvi" />

<link rel="stylesheet" href="/style/style.css">
<script src="/script/jquery.min.js"></script>
<script>
    var CONFIG = {
        title: "zgshen",
        author: "zgshen",
        lightbox: true,
        animate: true
    }
</script>



    <link rel="stylesheet" href="/lightbox/css/lightbox.min.css">




    <link rel="stylesheet" href="/syuanpi/syuanpi.min.css">







  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-106347761-1', 'auto');
  ga('send', 'pageview');
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?7c5eafa8151dbb980bab283494b9a0e2";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



</head>
<body>
    <div class="progress">
    <div class="progress-inner"></div>
</div>
    <div class="body">
    <div class="tagcloud-mask"></div>  
<div class="tagcloud" id="tagcloud">
    <div class="tagcloud-inner">
        <a href="/tags/Java基础/" style="font-size: 14px;">Java基础</a> <a href="/tags/Linux/" style="font-size: 14px;">Linux</a> <a href="/tags/Spring/" style="font-size: 14px;">Spring</a> <a href="/tags/spring/" style="font-size: 14px;">spring</a> <a href="/tags/web框架/" style="font-size: 14px;">web框架</a> <a href="/tags/其他/" style="font-size: 14px;">其他</a> <a href="/tags/博客/" style="font-size: 14px;">博客</a> <a href="/tags/商城技术应用/" style="font-size: 14px;">商城技术应用</a> <a href="/tags/数据库/" style="font-size: 14px;">数据库</a>
    </div>
</div>
    <header class="header" id="header">
    <div class="title syuanpi tvIn">
    <div class="table">
        <div class="connect">
            <div class="connect-inner">
                <span><a href="/">zgshen</a></span>
                
                    <span id="subtitle">欢迎…</span>
                
            </div>
        </div>
    </div>
</div>
    <nav class="main-nav syuanpi tvIn">
<div class="table">

    <ul class="menu">
        
        <li class="menu-item">
            <a href="javascript:;" id="search">
                <span>搜索</span>
                
                    <span class="menu-item-label">search</span>
                
            </a>
        </li>
        
        
        
            <li class="menu-item">
                <a href="/">
                    <span>文章</span>
                    
                        <span class="menu-item-label">article</span>
                    
                </a>
            </li>
        
        
        
            <li class="menu-item">
                <a href="/archives">
                    <span>归档</span>
                    
                        <span class="menu-item-label">archives</span>
                    
                </a>
            </li>
        
        
        
            <li class="menu-item">
                <a href="javascript:;" id="tags">
                    <span>标签</span>
                    
                        <span class="menu-item-label">tags</span>
                    
                </a>
            </li>
        
        
        
            <li class="menu-item">
                <a href="/about">
                    <span>关于</span>
                    
                        <span class="menu-item-label">about</span>
                    
                </a>
            </li>
        
        
        
            <li class="menu-item">
                <a href="/atom.xml">
                    <span>订阅</span>
                    
                        <span class="menu-item-label">RSS</span>
                    
                </a>
            </li>
        
        
    </ul>

</div>
</nav>
</header>
<div class="mobile-header">
    <div class="mobile-header-body">
        <div class="mobile-header-list">
            
            
                <div class="mobile-nav-item">
                    <a href="/">
                        <span>文章</span>
                        
                            <span class="menu-item-label">article</span>
                        
                    </a>
                </div>
            
            
            
                <div class="mobile-nav-item">
                    <a href="/archives">
                        <span>归档</span>
                        
                            <span class="menu-item-label">archives</span>
                        
                    </a>
                </div>
            
            
            
                <div class="mobile-nav-item inner-cloud">
                    <div class="mobile-nav-tag">
                        <a href="javascript:;" id="mobile-tags">
                            <span>标签</span>
                            
                                <span class="menu-item-label">tags</span>
                            
                        </a>
                    </div>
                    <div class="mobile-nav-tagcloud">
                        <div class="mobile-tagcloud-inner">
                            <a href="/tags/Java基础/" style="font-size: 14px;">Java基础</a> <a href="/tags/Linux/" style="font-size: 14px;">Linux</a> <a href="/tags/Spring/" style="font-size: 14px;">Spring</a> <a href="/tags/spring/" style="font-size: 14px;">spring</a> <a href="/tags/web框架/" style="font-size: 14px;">web框架</a> <a href="/tags/其他/" style="font-size: 14px;">其他</a> <a href="/tags/博客/" style="font-size: 14px;">博客</a> <a href="/tags/商城技术应用/" style="font-size: 14px;">商城技术应用</a> <a href="/tags/数据库/" style="font-size: 14px;">数据库</a>
                        </div>
                    </div>
                </div>
            
            
            
                <div class="mobile-nav-item">
                    <a href="/about">
                        <span>关于</span>
                        
                            <span class="menu-item-label">about</span>
                        
                    </a>
                </div>
            
            
            
                <div class="mobile-nav-item">
                    <a href="/atom.xml">
                        <span>订阅</span>
                        
                            <span class="menu-item-label">RSS</span>
                        
                    </a>
                </div>
            
            
        </div>
    </div>
    <div class="mobile-header-nav">
        <div class="mobile-header-item" id="mobile-left">
            <div class="header-menu-item">
                <span class="header-menu-line"></span>
            </div>
        </div>
        <h1 class="mobile-header-title">
            <a href="/">zgshen</a>
        </h1>
        <div class="mobile-header-item"></div>
    </div>
</div>

    <div class="container">
        <main class="main" id="main">
            
    
    <article class="post">
        <header class="post-header">
            <div class="post-time syuanpi riseIn-light back-1">
                <span>2016年9月29日</span>
                
            </div>
            <h1 class="post-title syuanpi riseIn-light back-2">
            
                淘淘商城的实践(2)——后台系统搭建
            
            </h1>
            
                
                    <div class="post-tags syuanpi riseIn-light back-3">
                    
                        <a href="/tags/商城技术应用/">商城技术应用</a>
                    
                    </div>
                
            
        </header>
        <div class="post-content syuanpi riseIn-light back-3">
            
                <p>前言：在这里记录在项目开发中的要点，对原网上的源码进一步优化和修改一些错误，对于开发过程中的一些冗长讲解不进行详细的分析，比如接下来的工程创建等等。<br>一、工程创建<br>1、系统工程使用Maven构建工具创建，工程之间的依赖关系如下<br><a id="more"></a><br><img src="http://img.blog.csdn.net/20160929110316423" alt="这里写图片描述"></p>
<p>跟着视频教程和源码资料创建工程，视频已经讲得非常详细这里就不多说。<br>如上图taotao-parent是一个pom类型父工程，用来管理依赖的jar包的版本，全局级别。<br>原网上的源码pom.xml中有些jar包配置存在错误，如果在构建完工程报jar包相关错误请检查配置。<br>例如原先commons-io的groupId就错了，应该是commons-io，在运行打包时就会报错。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">错误</div><div class="line">&lt;dependency&gt;</div><div class="line">	&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;</div><div class="line">	&lt;artifactId&gt;commons-io&lt;/artifactId&gt;</div><div class="line">	&lt;version&gt;$&#123;commons-io.version&#125;&lt;/version&gt;</div><div class="line">&lt;/dependency&gt;</div><div class="line">正确</div><div class="line">&lt;dependency&gt;</div><div class="line">	&lt;groupId&gt;commons-io&lt;/groupId&gt;</div><div class="line">	&lt;artifactId&gt;commons-io&lt;/artifactId&gt;</div><div class="line">	&lt;version&gt;$&#123;commons-io.version&#125;&lt;/version&gt;</div><div class="line">&lt;/dependency&gt;</div></pre></td></tr></table></figure></p>
<p>各种jar包的maven配置可以去<a href="http://mvnrepository.com/" target="_blank">maven repository</a> 网站查找，搜素需要的jar包，选择对应的版本就有相应的maven配置。例：<br><img src="http://img.blog.csdn.net/20160929113145796" alt="这里写图片描述"><br>自己重新排查了一遍，有些jar包因为本地仓库已经有了别的版本号文件，所以改了版本号不必重新下载。Spring用了4.3.0-release版，mybatis用了3.3.0版。</p>
<p> 2、taotao-common工程是用来存放各种自封装或其他来源的工具类，jar工程，最终打包成jar文件，给其他工程调用，需要调用的工程要依赖此工程。<br> 3、 创建聚合工程taotao-manager，pom类型，然后在工程下创建pojo实体类、mapper接口、service层， controller层对应的module模块工程。所有模块均依赖taotao-common工程，其中taotao-manager-mapper还依赖taotao-manager-pojo；taotao-manager-service还依赖taotao-manager-mapper和taotao-manager-pojo；taotao-manager-controller则manager其他模块都依赖。<br> 在Maven Dependencies目录下可以看到工程或模块依赖的jar包和工程。<br> <img src="http://img.blog.csdn.net/20160929115928354" alt="这里写图片描述"><br>  &nbsp;&nbsp;&nbsp;<img src="http://img.blog.csdn.net/20160929115946776" alt="taotao-manager-web依赖的jar包和工程模块"></p>
<p>3、在generatorSqlmapCustom工程配置数据库链接，使用mybatis逆向工程自动生成pojo类和mapper文件（逆向工程在度盘资源，第二天：框架整合，框架系统搭建文件夹中的参考资料压缩包中，包括数据库的sql，直接导入到本地数据库就行），生成的pojo类和mapper接口和xml复制到对应的工程下面。<br><img src="http://img.blog.csdn.net/20160929120908733" alt="这里写图片描述"></p>
<p>4、Spring、Mybatis和SpringMvc整合<br>框架整合配置xml文件和web.xml都在taotao-manager-web模块下进行配置，照着资料就行，不啰嗦<br><img src="http://img.blog.csdn.net/20160929164720171" alt="这里写图片描述"><br>事实Spring的三个applicationContext没必要分开，直接一个就行，当然，分开找起来比较容易，目的明确。</p>
<p>5、运行及简单测试工程。<br>(1)安装tomcat插件和依赖工程到maven仓库<br>    工程运行采用的是maven的tomcat插件，需要在taotao-parent工程的pom.xml进行配置，顺便指定jdk版本等其他配置：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">&lt;build&gt;</div><div class="line">	&lt;finalName&gt;$&#123;project.artifactId&#125;&lt;/finalName&gt;</div><div class="line">	&lt;plugins&gt;</div><div class="line">		&lt;!-- 资源文件拷贝插件 --&gt;</div><div class="line">		&lt;plugin&gt;</div><div class="line">			&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</div><div class="line">			&lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;</div><div class="line">			&lt;version&gt;2.7&lt;/version&gt;</div><div class="line">			&lt;configuration&gt;</div><div class="line">				&lt;encoding&gt;UTF-8&lt;/encoding&gt;</div><div class="line">			&lt;/configuration&gt;</div><div class="line">		&lt;/plugin&gt;</div><div class="line">		&lt;!-- java编译插件 --&gt;</div><div class="line">		&lt;plugin&gt;</div><div class="line">			&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</div><div class="line">			&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;</div><div class="line">			&lt;version&gt;3.1&lt;/version&gt;</div><div class="line">			&lt;configuration&gt;</div><div class="line">				&lt;source&gt;1.8&lt;/source&gt;</div><div class="line">				&lt;target&gt;1.8&lt;/target&gt;</div><div class="line">				&lt;encoding&gt;UTF-8&lt;/encoding&gt;</div><div class="line">			&lt;/configuration&gt;</div><div class="line">		&lt;/plugin&gt;</div><div class="line">	&lt;/plugins&gt;</div><div class="line">	&lt;pluginManagement&gt;</div><div class="line">		&lt;plugins&gt;</div><div class="line">			&lt;!-- 配置Tomcat插件 --&gt;</div><div class="line">			&lt;plugin&gt;</div><div class="line">				&lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;</div><div class="line">				&lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;</div><div class="line">				&lt;version&gt;2.2&lt;/version&gt;</div><div class="line">			&lt;/plugin&gt;</div><div class="line">		&lt;/plugins&gt;</div><div class="line">	&lt;/pluginManagement&gt;</div><div class="line">&lt;/build&gt;</div></pre></td></tr></table></figure></p>
<p>由于项目工程的jar版本都依赖taotao-parent工程，所以需要先将taotao-parent工程安装到本地maven仓库中，同样的，taotao-common也要安装到maven仓库中。安装方法：右键工程run as—maven install，执行完毕会在当前系统用户文件夹的.m2文件夹下面看到安装的taotao-parent和taotao-common<br><img src="http://img.blog.csdn.net/20160929152056555" alt="这里写图片描述"></p>
<p>(2)打包和运行<br>我们最终发布出去放到服务器上的是war包，即taotao-manager-web模块的war包，直接对聚合工程taotao-manager打包，会自动对工程下的模块的jar或war模块进行打包，最终发布的是taotao-manager-web下的war包。操作:右键run as -maven build ，选第二个（第一次选第一个也行），在 Goals一栏输入clean package，点击run即可。<br><img src="http://img.blog.csdn.net/20160929152724033" alt="执行成功的信息"></p>
<p>这里需要注意的地方是mapper模块是打成jar包的，默认不包含mybatis的映射xml文件，需要在taotao-manager-mapper的pom.xml文件加上以下配置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;!-- 如果不添加此节点mybatis的mapper.xml文件都会被漏掉。 --&gt;</div><div class="line">	&lt;build&gt;</div><div class="line">		&lt;resources&gt;</div><div class="line">			&lt;resource&gt;</div><div class="line">				&lt;directory&gt;src/main/java&lt;/directory&gt;</div><div class="line">				&lt;includes&gt;</div><div class="line">					&lt;include&gt;**/*.properties&lt;/include&gt;</div><div class="line">					&lt;include&gt;**/*.xml&lt;/include&gt;</div><div class="line">				&lt;/includes&gt;</div><div class="line">				&lt;filtering&gt;false&lt;/filtering&gt;</div><div class="line">			&lt;/resource&gt;</div><div class="line">		&lt;/resources&gt;</div><div class="line">	&lt;/build&gt;</div></pre></td></tr></table></figure></p>
<p>运行或调试命令:右键taotao-manager工程run as 选第二项，在在 Goals一栏输入clean tomcat7:run，然后点击run即可。<br>调试时若提示找不到源文件，手动添加即可，可以在提示界面直接选择添加，也可以入下图在debug或run按钮的debug/run Configurations里面的Source选项卡进行配置，将需要的工程添加进去<br><img src="http://img.blog.csdn.net/20160929163345262" alt="这里写图片描述"></p>
<p><img src="http://img.blog.csdn.net/20160929163359823" alt="这里写图片描述"></p>
<p>测试结果,浏览器访问index.jsp<br><img src="http://img.blog.csdn.net/20160929163617250" alt="这里写图片描述"></p>
<p>访问测试controller请求，查询数据库商品<br><img src="http://img.blog.csdn.net/20160929163800184" alt="这里写图片描述"></p>
<p>重新整理的工程源码<a href="http://download.csdn.net/detail/u012809062/9643235" target="_blank">点击下载</a></p>

            
        
        </div>
        
            
            
        
    </article>
    
        
    <nav class="article-page">
        
            <a href="/2016/10/02/淘淘商城的实践(3)——图片服务器部署和前台工程/" id="art-left" class="art-right">
                <span class="next-title">
                    淘淘商城的实践(3)——图片服务器部署和前台工程<i class="iconfont icon-right"></i> 
                </span>
            </a>
        
        
            <a href="/2016/09/29/淘淘商城的实践(1)——说明篇/" id="art-right" class="art-left">
                <span class="prev-title"> 
                    <i class="iconfont icon-left"></i>淘淘商城的实践(1)——说明篇
                </span>
            </a>
        
    </nav>

        
    


        </main>
        <footer class="footer syuanpi fadeIn" id="footer">
    <hr>
    <div class="footer-wrapper">
        <div class="left">
            <div class="contact-icon">
    
    
    
    
    
    
    
    
        
            <a href="https://github.com/zgshen" class="iconfont icon-github" title="github"></a>
        
        
        
        
        
        
        
    
</div>
        </div>
        <div class="right">
            <div class="copyright">
    <div class="info">
        <span>&copy;</span>
        <span>1970 ~ 2017</span>
        <span>❤</span>
        <span>zgshen</span>
    </div>
    <div class="theme">
        <span>
            动力来源于
            <a href="http://hexo.io/" target="_blank">Hexo </a>
        </span>
        <span>
            主题
            <a href="https://github.com/ColMugX/hexo-theme-Nlvi"> Nlvi </a>
        </span>
    </div>
    
</div>
        </div>
    </div>
</footer>
    </div>
    <script src="/script/nlvi.js"></script>
<script src="/script/search.js"></script>

    <script src="/lightbox/js/lightbox.min.js"></script>

<script>
$(document).ready(function(){
    document.body.addEventListener('touchstart', function () {});
    $('.progress').hide();
    $('.body').show();
    Nlvi.tagcloud();
    Nlvi.mobileHeader();
    Nlvi.back2top();
    Nlvi.smoothScroll();
    Nlvi.onView();
    Nlvi.showToc();
    Nlvi.showComments();
    Nlvi.showReward();

    !CONFIG.animate && Nlvi.offAnimate();
    CONFIG.lightbox && Nlvi.onPicBox();
})
</script>
    </div>
    
        
    
    <div class="backtop syuanpi dead toTop" id="backtop">
    <i class="iconfont icon-up"></i>
    <span style="text-align:center;font-family:Georgia;"><span style="font-family:Georgia;" id="scrollpercent">1</span>%</span>
</div>
    
    <div class="search" id="search">
        <div class="mask" id="mask"></div>
        <div class="search-wrapper syuanpi">
            <h1 id="search-header" class="syuanpi">搜索一下？</h1>
            <div class="input">
                <input type="text" id="local-search-input" results="0" name="">
            </div>
            <div id="local-search-result"></div>
        </div>
    </div>
    <script>
    var GREETING = {
        morning: "当我们探索时，就要发现到真理",
        noon: "人的天职在于勇于探索真理。",
        after: "一件事实是一条没有性别的真理",
        night: "真理有时可能变得黯淡，但它永远不会熄灭",
        midnight: "真理在人那里获得生命力，并且展现出来"
    }
    $(document).ready(function(){
        Nlvi.search();
    });
    </script>

</body>
</html>
